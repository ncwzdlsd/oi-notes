## 贪心

### 简介

贪心算法是从问题的**初始状态**出发，通过若干次的贪心选择而得到的最优值（或较优值）。

贪心策略必须具备无后效性，即某个状态以后的过程不会影响以前的状态，至于当前状态有关。

适用前提是，局部最优策略能导致全局最优策略。

### 常见问题

#### 部分背包问题

$n$ 个物体，第 $i$ 个物体重量为 $w_i$，价值为 $v_i$，选择物体，每一个物体可以只取走一部分，使得总重量不超过 $S$ 且总价值尽量高。

贪心策略：先选出性价比高的。

#### 乘船问题

$n$ 个人，第 $i$ 个人重量为 $w_i$，每艘船载重量为 $C$，最多可乘两人。用最少的船装载所有人。

贪心策略：最轻的人和最重的人配对。

#### 区间选点问题

[Portal.](https://loj.ac/p/10001)

将区间按照右端点的先后顺序排序，依次取每个区间的右端点（因为右端点可以覆盖尽量多的线段），递归操作即可。

#### 区间覆盖问题

给 $n$ 个闭区间 $[a_i,b_i]$，选择尽量少的区间覆盖一条指定的线段区间 $[s,t]$。

[Portal.](https://loj.ac/p/10002)

将所有区间的左端点从大到小排序，每次选择覆盖点 $s$ 的区间中右端点坐标最大的一个，并将 $s$ 更新为该区间的右端点坐标，直到选择的区间包含 $t$ 为止。

#### Johnson 不等式

一种应用于加工生产调度问题的贪心策略。

![](https://cdn.luogu.com.cn/upload/image_hosting/mm7ku0wn.png)

我们先考虑两个物品 $\{a_1,b_1\},\{a_2,b_2\}$，先假定在 A 机器上，1 物品比 2 物品先加工，上图中的 1 和 2 分别是作业 2 在 B 机器上加工有 / 无等待的情况。

显然有 $T_{\min}=a_1+b_1+a_2+b_2-\min(b_1,a_2)$（相当于减掉两机器同时加工物品的情况）。对于 2 物品比 1 物品先在 A 机器加工的的情况，有 $T_{\min}=a_1+b_1+a_2+b_2-\min(a_1,b_2)$，所以按照 $\min(b_1,a_2),\min(a_1,b_2)$ 的大小降序排序即可。

## 前缀和

### 一维前缀和


### 二维前缀和

-  预处理 $O(mn)$

   ```cpp
   for(int i=1;i<=m;i++)
       for(int j=1;j<=n;j++)
       {
           scanf("%d",&a[i][j]);
           sum[i][j]=sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1]+a[i][j];
       }
   ```
   
- $s(i,j)$ 表示第 $i$ 行 $j$ 列格左上部分所有元素的和。以 $(x_1,y_1)$ 为左上角，$(x_2,y_2)$ 为右下角的子矩阵的和为：$s(x_2,y_2)-s(x_1-1,y_2)-s(x_2,y_1-1)+s(x_1-1,y_1-1)$

## 差分

### 差分数组

首先给定一个原数组 $a$，然后我们构造一个数组 $b$，使得 $a_i=b_1+b_2+b_3+\cdots+b_i$。
也就是说，$a$ 数组是 $b$ 数组的前缀和数组，反过来我们把 $b$ 数组叫做 $a$ 数组的差分数组。换句话说，每一个 $a_i$ 都是 $b$ 数组中从头开始的一段区间和。

### 差分

1. 一维差分

   给 $a$ 数组中的 $[l,r]$ 区间中的每一个数都加上 $c$，只需对差分数组 $b$ 做 `b[l]+=c,b[r+1]-=c` 。时间复杂度为 $O(1)$。

2. 二维差分

   ```cpp
   s[x1][y1]+=c,s[x2+1][y1]-=c,s[x1][y2+1]-=c,s[x2+1][y2+1]+=c;
   ```

### 树上差分

对树上的一条路径进行操作，询问某个点 / 边的经过次数。

#### 点差分

从下往上更新信息。对于一条路径 $u\rightarrow v$，我们把 $s_u,s_v$ 分别加 $1$，注意到此时 LCA 被更新了两次，所以要把 LCA 的 $s$ 值减 $1$。同时因为 LCA 的父亲也被多更新了一次，所以也要减 $1$。

## 递归

### 卡特兰数

卡特兰数，又称卡塔兰数（Catalan Number），是组合数学中一个常用的数列。其前几项为：$\boxed{1,2,5,14,42,132,429,1430,4862,\cdots}$

1. $f(n)=\sum_{i=0}^{n-1}f(i)\times f(n-i-1)$

2. $f(n)=\dfrac{f(n-1)\times(4\times n-2)}{n+1}$

卡特兰数的组合数学公式，详见[组合数学](https://blog.csdn.net/ncwzdlsd/article/details/133952351#t5)。

### 汉诺塔问题

1. 移动 $n$ 个盘子需要 $2^{n-1}$ 步。
2. 设 $f_i$ 为移动 $i$ 个盘子的最少步数，有 $f_i=2\times f_{i-1}+1$。


## 排序

![](https://cdn.luogu.com.cn/upload/image_hosting/21f2w1np.png)
